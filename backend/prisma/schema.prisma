// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ==================== USER & AUTH ====================
model User {
  id            String    @id @default(uuid())
  email         String    @unique
  password      String
  firstName     String?
  lastName      String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  aircraft      Aircraft[]
  
  @@map("users")
}

// ==================== AIRCRAFT ====================
model Aircraft {
  id              String    @id @default(uuid())
  userId          String
  user            User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  registration    String
  type            String
  name            String?
  
  // Performance data
  cruiseSpeed     Float
  fuelConsumption Float
  fuelUnit        FuelUnit  @default(LITERS)
  
  // Weight & Balance
  emptyWeight     Float
  maxTakeoffWeight Float
  usableFuel      Float
  
  // Arm positions (for CG calculation)
  emptyWeightArm      Float?
  fuelArm             Float?
  frontSeatArm        Float?
  rearSeatArm         Float?
  baggageArm          Float?
  
  // Limits
  forwardCGLimit      Float?
  aftCGLimit          Float?
  maxBaggageWeight    Float?
  
  // CG Envelope
  cgEnvelope          Json?
  
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  
  @@map("aircraft")
}

enum FuelUnit {
  LITERS
  GALLONS
}

// airports 
model Airport {
  id              String    @id @default(uuid())
  icaoCode        String    @unique
  iataCode        String?
  name            String
  city            String?
  country         String
  
  latitude        Float
  longitude       Float
  elevation       Int
  
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  
  @@map("airports")
}
